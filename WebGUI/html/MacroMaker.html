<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>MacroMaker</title>
		
		<link rel="stylesheet" type="text/css" href="/WebPath/css/ots.css" />
		<link rel="stylesheet" type="text/css" href="/WebPath/css/MultiSelectBoxForMacroMaker.css">
		
		<style type="text/css">			
		* {
			margin: 0;
			spacing: 0;
			padding: 0;
			border: 0;
			color: #c4e9f5;
			-webkit-user-select: 	none;
			-moz-user-select: 		none;
			user-select:			none;
			font-family: serif; /*'Donegal One', serif;*/		
			outline: none;  /* to stop firefox selection*/	
		}
		
		@-moz-document url-prefix() { /* css targeted for firefox */	
		  *{
		  	font-size:13px;
		  }
		  a, button {
		  	font-size:12px;
		  }
		  h2 {
		    font-size:17px !important;
		  }
		  h3 {
		    font-size:15px;
		  }
		  textarea {
		  	height: 20px;
		  	width: 110px;
		  }
		  button{
		  	padding: 0.5px !important;
		  }
		  #macroNameEdit {
		    width: 400px;
		  }
		  #macroNotesEdit {
		    width: 400px;
		    height:52px;
		  }
		  #macroName {
		    width: 360px;
		  }
		  #macroNotes {
		    width: 360px;
		    height:106px;
		  }
		  #valueAtRunTime {
		  	width: 200px;
		  }
		  #privateTag, #publicTag, #page1tag, #page2tag {
		  	font-size:11px;
		  }
		}
		
		body {
			background-color: #001626;
			color: #c4e9f5 !important;
			<!--do not remove..background-image: url(/WebPath/images/windowContentImages/macromaker-bg-texture.jpg);-->
			overflow: auto;
			font-family: Sans-serif;
			font-size:15px;
		}
		
		#fecList, #main, #history {
		    padding:5px;	
	    }	
	    
		#maker {
		    padding:5px;
		    display:none;
		}
		
		h3 {	
			background-color: #993333;
			margin: 2px 13px 2px 10px;
			text-align: center;
		}
		
		h4 {
			margin: 5px 0px 15px 0px;
		}
		
		a {	
		    color: #c4e9f5;
			cursor: pointer; 
		}
		
		button {
			padding: 3px;
		    color: #001626;  
        	margin: 0 5px 0 5px;
        	display: inline;
		}
		
		#historyContent {
			overflow:scroll;
			overflow-x: hidden;
			padding:5px;
		}
		
		#macroLib {
		    padding:5px;
		    margin-bottom:5px;
		}
		
		#progressBarOuter {
		    padding:5px;
		}
		
	    #progressBarInner {
		    display:none;
		}
		
		#sequence {
			display:none;
			padding:5px;
		}
		
		#sequenceContent {
			overflow:scroll;
			overflow-x: hidden;
			padding:2px;
		}
		
		.listOfMacros {
			overflow:scroll;
			overflow-x: hidden;
			padding:5px;
			margin: 0 10px 20px 0;
		}
		
		.mainBlock {
			position:absolute;
		}
		
        .innerClass1{
			background: #002a52;
			padding: 0.2em 0.2em 0.2em 0.1em;
			cursor: pointer; 
		}
		
		.innerClass2{
		    padding: 0.2em 0.2em 0.2em 0.1em;
		    cursor: pointer; 
		}
		
		.insideSEQ{
			display: inline;
		}
		
		.textSEQ{
			float:left;
		}
		
		.seqDiv{
		    padding: 0.2em 0.2em 0.2em 0.2em;
		    margin: 0.2em 0.2em 0.2em 0.2em;
			cursor: move; 
		    width:90%;
		    float:left;
		}
		

		.deletex{
			width:18px;
			height:18px;
			float:right;
			cursor: pointer; 
			border : 2px solid #c4e9f5;
			border-radius: 50%;
			text-align:center;
			vertical-align: middle;
			z-index:99;
			display:none;
			position:absolute;
		}
		
		.variableMark1{
			width:16px;
			height:16px;
			background-color: #002a52;
			cursor: pointer; 
			padding: 3px;
			text-align:center;
			vertical-align: middle;
			z-index:99;
			display:inline;
			margin: -17px 0 0 -23px;
		}
		
		.variableMark2{
			width:16px;
			height:16px;
			background-color: #ff0101;
			cursor: pointer; 
			padding: 3px;
			text-align:center;
			vertical-align: middle;
			z-index:99;
			display:inline;
			margin: -17px 0 0 -23px;
		}
		
		.chosenClassInSequence{
			border: 1.5px solid #993333;
			background-color: #001626;
		}
		
		.ghostClassInSequence{
			background-color: #002a52;
		}
		
		.macroDiv{
		    padding: 0.2em 0.2em 0.2em 0.2em;
		    margin: 0.2em 0.2em 0.2em 0.2em;
		    cursor: context-menu; 
		    border: 2px solid #993333;
		    width: 90%;
		    border-radius:2px;
		}
        
        .inputBox{
            background-color: #c4e9f5;
            color:#001626;
            margin-right:5px;
            width:90px;
            outline: none;
        }
        
        .hide {
      		color:#001626 !important;
      	}
      	
      	.center {
      		margin-top:5px;
      		text-align:center;
      	}
      	
        .select{
        	color:#001626;  
        	margin:0 5px 0 5px;
        	padding:0.5px;
        	display: inline;
        	border-radius: 1px;
        }
        
		.formatSelection{
			margin:5px 0 0 0;
		}
        .buttonGroup{
        	margin: 12px 0 10px 25px;
        }
        
        .red{
        	color: #993333 !important;
        }

        .dropdown{
        	color:#001626;
        	margin-bottom:10px;
        	border-radius:1px;
        	width: 45px;
        	height: 17px;
        }
        
        #sequenceAddress{
        	margin: 5px 0 0 0;
        }
        #sequenceData{
        	margin: 5px 0 0 22px;
        }

		#twoButtons{
        	margin-top: 50px;
        }
        
        ul{
        	margin: 0 0 0 10;
        	list-style: none;
        }

        
        textarea  
		{  
		   font-family:sans-serif;  
		   font-size: 14px;   
		   color: #002540;
		   background-color: #c4e9f5;
		   resize: none;
		}
		
        .popup{
        	width:400px;
        	height:300px;
        	background-color: #002540;
        	z-index:9;
        	position: fixed;
			top: 40%;
			left: 50%;
			margin-top: -100px;
			margin-left: -200px;
			opacity:0.9;
			border-radius:5px;
			padding:6px;
			color:#c4e9f5;
			border: 2px solid #c4e9f5;
        }
        
        .popupEdit{
            top: 40%;
			left: 50%;
			margin-top: -30px;
			margin-left: -30px;
        	background-color: #002540;
        	z-index:9;
        	position: fixed;
			opacity:0.9;
			border-radius:5px;
			padding:6px;
			color:#c4e9f5;
			border: 2px solid #c4e9f5;
			width:460px;
        }
        
        .smallPopup{
        	width:225px;
        	height:112px;
        	background-color: #002540;
        	z-index:9;
        	position: fixed;
			top: 30%;
			left: 50%;
			margin-left: -110px;
			opacity:0.9;
			border-radius:5px;
			padding:6px;
			color:#c4e9f5;
			border: 2px solid #c4e9f5;
			display:none;
        }

        
        #popupSaveMacro{
        	display:none;
        }
        
        #popupEditMacro{
        	display:none;
        }
        
        .stayAtBottomOfParent{
			position: absolute;
			bottom:10px;
        }
        
        #macroSequenceEdit {
			overflow:scroll;
			overflow-x: hidden;
			padding:5px;
			height: 75px;
		}
		
		lable textarea {
			vertical-align: middle;
		}
		
		#makeMacroPublic {
			padding: 10px;
			text-align: center;
			width: 100%;
			display: none;
		}
		
        .context-menu {
		  display: none;
		  position: absolute;
		  z-index: 10;
		  padding: 5px 0;
		  width: 200px;
		  background-color: #c4e9f5;
		  border: solid 1px #dfdfdf;
		  box-shadow: 1px 1px 2px #cfcfcf;
		}
		
		.context-menu--active {
		  display: block;
		}
		
		.context-menu__items {
		  list-style: none;
		  margin: 0;
		  padding: 0;
		}
		
		.context-menu__item {
		  display: block;
		  margin-bottom: 2px;
		}
	
		.context-menu__link {
		  display: block;
		  padding: 4px 12px;
		  color: #001626;
		  text-decoration: none;
		}
		
		.context-menu__link:hover {
		  color: #fff;
		  background-color: #002a52;
		}
		
		#macroRunningProgress {
		  position: relative;
		  width: 80%;
		  margin: 0 auto; 
		  height: 30px;
		  background-color: #c4e9f5;
		  border-radius:5px;
		  border: 2px solid #c4e9f5;
		}
		
		#macroRunningBar {
		  position: absolute;
		  width: 0%;
		  height: 100%;
		  background: repeating-linear-gradient(
			  45deg,
			  #002540,
			  #002540 10px,
			  #993333 10px,
			  #993333 20px
			);
	      border-radius:5px;
		}
        
        #macroRunningPercentage {
          margin: 0 auto; 
          font-weight: bold;
          padding-top: 5px;
        }
        
        #infoButton {
  		    top: 4px; 
  		    right: 7px;
  		    position: absolute;
  		    cursor:pointer;
        }
        
        #refreshButton {
  		    top: 7px; 
  		    right: 37px;
  		    position: absolute;
  		    cursor:pointer;
        }
        
		#popupNameVariableYesButton {
			display:none;
		}
        
        @media only screen and (max-height: 400px){
        	#progressBar{
        	display:none;
        	}
        	#macroLib {
		    display:none;
			}
        }
        
        @media only screen and (min-width: 1215px){
        	.center{
	            width:50%;
	    		margin: 0 auto; 
            }
        }
        
        @media only screen and (min-width: 819px)and(max-width: 1215px) {
        	.center{
	            width:75%;
	    		margin: 0 auto; 
            }
        }
		</style>
		
		<script type="text/JavaScript" src="/WebPath/js/Globals.js"></script>
		<script type="text/JavaScript" src="/WebPath/js/Debug.js"></script>
		<script type="text/JavaScript" src="/WebPath/js/DesktopWindowContentCode.js"></script>
		<script type="text/JavaScript" src="/WebPath/js/Macromaker.js"></script>
		<script type="text/JavaScript" src="/WebPath/js/js_lib/MultiSelectBox.js"></script>
		<script type="text/JavaScript" src="/WebPath/js/js_lib/Sortable.js"></script>
		  
	</head>


	<body onload='Macromaker:init();'>
	
	    <div class='mainBlock' id='fecList'>
	        <h3>List of Available FEs</h3>
	        <div id='list'></div>
		</div>
		
		<div class='mainBlock' id='macroLib'>
		    <h3>Macro Library</h3>
		    <p><small>
		    <center>
			<a id="privateTag" onclick="toggleMacroPublicity(0)">Private Macros</a>
			<a id="publicTag" style="margin-left:8px" onclick="toggleMacroPublicity(1)">Public Macros</a>
			</small></p>
			</center>
			<div id="listOfPrivateMacros" class="listOfMacros"></div>
			<div id="listOfPublicMacros" class="listOfMacros"></div>
		</div>
		
		<div class='mainBlock' id='sequence'>
	        <h3>Macro Sequence</h3>
	        <div id="sequenceContent"></div>
		</div>
		
		<div id="nav">
			<p class="center"><small>
			<a id="page1tag" onclick="toggleDisplay(0)">Manual Commands</a>
			<a id="page2tag" style="margin-left:15px" onclick="toggleDisplay(1)">Macro Maker</a>
			</small></p>
			<div class="right">
				<a href="https://docs.google.com/a/iit.edu/document/d/1tTeaO9wKnVJshU9OrY7FFOGC39TTIieD1uZ9cTtY-hs/edit?usp=sharing" target="_blank">
					<img src="/WebPath/images/windowContentImages/macromaker-information.png" alt="Info" id="infoButton"
				     width='26' height='26' title="Info"/>
				</a>
				<img src="/WebPath/images/windowContentImages/macromaker-refresh.png" alt="Refresh" id="refreshButton" 
					width='20' height='20' onclick="init()" title="Refresh"/>
			</div>
		</div>
		
		<div class='mainBlock' id='main'>
	        <h3>Manual Commands</h3>
	        <div class="center">
		        <p>Address:  <input type="text" id="addressInput" class="inputBox"/></p>
		        <div id="output1" class="formatSelection">Address format:
		           <select id="addressFormat" class="dropdown" onchange="toggleLSBF()">
				    <option class="select" value="hex" selected="selected">hex</option>
				    <option class="select" value="dec">dec</option>
				    <option class="select" value="ascii">ascii</option>
				   </select>
				</div>
		        <p>Data:  <input style="margin-left:23px" type="text" id="dataInput" class="inputBox"/></p>
		        <div id="output2" class="formatSelection">Data format:
		           <select style="margin-left:23px" id="dataFormat" class="dropdown">
				    <option class="select" value="hex" selected="selected">hex</option>
				    <option class="select" value="dec">dec</option>
				    <option class="select" value="ascii">ascii</option>
				   </select>
				</div>
				<input id="lsbFirst" type="checkbox" checked="checked"> Least Significant Byte First</input>
		        <b><div id="reminder" class="red"></div></b>
		        
		        <div class="buttonGroup">
		        	<button onclick="callRead()">Read</button>
		        	<button onclick="callWrite()">Write</button>
		        </div>
		        <div class="buttonGroup">
		        	<button onclick="showPopupClearHistoryConfirm()">Clear History</button>
		        </div>
		    </div>
		</div>
		
		<div class='mainBlock' id='maker'>
	        <h3>Macro Maker</h3>
	        <div class="center">
		        <p id = "sequenceAddress">Address:  <input type="text" id="macroAddressInput" class="inputBox"/></p>
			    <p id = "sequenceData">Data:  <input type="text" id="macroDataInput" class="inputBox"/></p>
				
				<div class="buttonGroup">
		        	<button onclick="addCommand('w')">Add Write</button>
		        	<button onclick="addCommand('r')">Add Read</button>
		        </div>
		        
		        <p>Delay:  <input type="text" id="delayInput" class="inputBox"/>
		           <select id="delayUnit" class="dropdown">
				    <option class="select" value="s" selected="selected">s</option>
				    <option class="select" value="ms">ms</option>
				   </select>
		        </p>
		        <div class="buttonGroup">
		        	<button onclick="addCommand('d')">Add Delay</button>
		        </div>
		        <b><div id="macroReminder" class="red"></div></b>
		        <div id="twoButtons">
		            <button onclick="showPopupClearAllConfirm()">Clear All</button>
		        	<button onclick="saveMacro()">Save as Macro</button>
		        </div>
		        <div class="buttonGroup">
		        	<button id="undoDelete" onclick="undoDelete()" disabled>Undo Delete</button>
		        </div>
		         <div class="formatSelection" onchange="reloadMacroSequence()">Display 
		           <select id="sequenceFormat" class="dropdown">
				    <option class="select" value="hex" selected="selected">hex</option>
				    <option class="select" value="dec">dec</option>
				    <option class="select" value="ascii">ascii</option>
				   </select>
				format for all commands in the sequence</div>
		    </div>
		</div>
		
		<div class='mainBlock' id='progressBarOuter'>
		  <div id='progressBarInner'>
		    <center><h4>Macro Running...</h4></center>
			<div id="macroRunningProgress">
 			   <div id="macroRunningBar">
 			     <center>
 			      <p id="macroRunningPercentage">5%</p>
 			     </center>
 			   </div>
			</div>
		  </div>
		</div>
		
		<div class='mainBlock' id='history'>
		   <h3>Command History</h3>
           <div id="historyContent"><b>Scroll to see the history of commands. Click to rerun. </b><br></div>
		</div>
		
		<div id="popupSaveMacro" class="popup">
			<center><h2>Save your Macro</h2></center>
			<div>
				<p><b>Macro Name</b></p>
				<textarea id="macroName" cols="43" rows="1"></textarea>
				<p><b>Macro Notes</b></p>
				<textarea id="macroNotes" cols="43" rows="6"></textarea>
				<div class="buttongroup">
					<center>
						<button onclick="hidePopupSaveMacro()">Cancel</button>
						<button onclick="saveAsMacro()">Save as Macro</button>
					</center>
				</div>
				<div id="makeMacroPublic">
				    <input type="checkbox" id="isMacroPublic"> Make accessible to public</input>
				</div>
			</div>
		</div>
		<div id="popupEditMacro" class="popupEdit">
			<h2><center>Macro Editor</center></h2>
			<div id="macroEditContainer">
				<p><b>Macro Name</b></p>
				<textarea id="macroNameEdit" cols="49" rows="1"></textarea>
				<p><b>Macro Sequence</b></p>
				<div id="macroSequenceEdit">Loading</div>
				<div class="stayAtBottomOfParent">
					<p><b>Macro Notes</b></p>
					<textarea id="macroNotesEdit" cols="49" rows="3">Pre-fill here</textarea>
					<div class="buttongroup">
					  <center>
						<button onclick="hidePopupEditMacro()">Cancel</button>
						<button onclick="saveChangedMacro()">Save changes</button>
					  </center>
					</div>
				</div>
			</div>
		</div>
		<div id="popupNameVariable" class="smallPopup">
			<h4 id="nameVariablePrompt">How would you like to name this variable?</h4>
		    <textarea id="nameVariable" cols="20" rows="1"></textarea>
		    <div class="buttongroup">
			  <center>
			  	<button id="popupNameVariableYesButton">Yes</button>
				<button id="popupNameVariableCancelButton">Cancel</button>
				<button id="popupNameVariableSaveButton"">Save</button>
			  </center>
			</div>
		</div>
		<div id="popupClearAllConfirm" class="smallPopup">
			<h4>You will be clearing macro sequence. Do you wish to continue?</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="clearAll(this)">Yes, please</button>
				<button onclick="hideSmallPopup(this)">Cancel</button>
			  </center>
			</div>
		</div>
		<div id="popupClearHistoryConfirm" class="smallPopup">
		    <h4>You will be clearing macro history. Do you wish to continue?</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="clearHistory(this)">Yes, please</button>
				<button onclick="hideSmallPopup(this)">Cancel</button>
			  </center>
			</div>
		</div>
		<div id="popupAskForVariableValue" class="smallPopup">
		    <h4 id="assignValuePrompt">What value would you assign to variable <span id="variableNameAtRunTime" class="red"></span>?</h4>
		    <textarea id="valueAtRunTime" cols="20" rows="1"></textarea>
		    <div class="buttongroup">
			  <center>
				<button id="popupAskForVariableValueContinue">Continue</button>
				<button onclick="hideSmallPopup(this);isMacroRunning=false">Cancel</button>
			  </center>
			</div>
		</div>
		<div id="popupDeleteMacroConfirm" class="smallPopup">
			<h4>You are deleting <span id="macroNameForDelete" class="red"></span>. Do you wish to continue?</h4>
		    <div class="buttongroup">
			  <center>
				<button id="popupDeleteMacroConfirmYes">Yes, please</button>
				<button id="popupDeleteMacroConfirmCancel">Cancel</button>
			  </center>
			</div>
		</div>
		<div id="popupNoEditPermission" class="smallPopup">
			<h4>You have no permission to edit public macros</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
		<div id="popupNoDeletePermission" class="smallPopup">
			<h4>You have no permission to delete public macros</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
		<div id="popupIllegalNaming" class="smallPopup">
			<h4>Macro name can only contain alphanumeric and underscore</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
		<div id="popupIllegalInput" class="smallPopup">
			<h4>Found illegal characters in the following field: </h4>
			<h4 id="illegalInputValue"></h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
	    <div id="popupIllegalEdit" class="smallPopup">
			<h4>Address/data field can only be a number</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
	    <div id="popupEmptyInput" class="smallPopup">
			<h4>You have one or more empty address/data field(s)</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
		<div id="popupIllegalNotes" class="smallPopup">
			<h4>Macro notes cannot contain "#", "@" or ".."</h4>
		    <div class="buttongroup">
			  <center>
				<button onclick="hideSmallPopup(this)">Okay</button>
			  </center>
			</div>
		</div>
	  <nav id="context-menu" class="context-menu">
	    <ul class="context-menu__items">
	      <li class="context-menu__item">
	        <a href="#" class="context-menu__link" data-action="Edit"> Edit Macro</a>
	      </li>
	      <li class="context-menu__item">
	        <a href="#" class="context-menu__link" data-action="Delete"> Delete Macro</a>
	      </li>
	      <li class="context-menu__item">
	        <a href="#" class="context-menu__link" data-action="Start"> Clone to start of sequence</a>
	      </li>
	      <li class="context-menu__item">
	        <a href="#" class="context-menu__link" data-action="End"> Clone to end of sequence</a>
	      </li>
	      <li class="context-menu__item">
	        <a href="#" class="context-menu__link" data-action="Export"> Export Macro to C++ file</a>
	      </li>
	    </ul>
	  </nav>
	  <script type="text/JavaScript" src="/WebPath/js/js_lib/ContextMenu.js"></script>
	</body>
	   
</html>

 
