<!DOCTYPE HTML>
<html lang="en"> 
<head>
	<title>System Block Diagram</title>

	<link href='/WebPath/css/fonts.css?family=Inconsolata:400' rel='stylesheet' type='text/css'>
		
	<link rel="stylesheet" type="text/css" href="/WebPath/css/ConfigurationGUI.css">
	<link rel="stylesheet" type="text/css" href="/WebPath/css/ConfigurationAPI.css">

	
	<style type="text/css">			
		
		body {	
			padding:0;
			margin:0;
			background-color:white;
		}

		/* make links have a hand cursor */
		a {
			cursor: pointer;
		}
		
		.linkDiv {
			border: 1px solid red;
			border-radius: 10px;
		}
		
		#img {
			position: absolute;
			border: 0;
		}
		
		
	</style>
	
	
	<script type="text/JavaScript" src="/WebPath/js/Globals.js"></script>	
	<script type="text/JavaScript" src="/WebPath/js/Debug.js"></script>	
	<script type="text/JavaScript" src="/WebPath/js/DesktopWindowContentCode.js"></script>
	<script type="text/JavaScript" src="/WebPath/js/js_lib/SimpleContextMenu.js"></script>
	<script type="text/JavaScript" src="/WebPath/js/js_lib/ConfigurationAPI.js"></script>
	
	<script>		
		
		//	Description of System Block Diagram Functionality/Behavior:
		//	
		//		- Block diagram is overlayed with link-divs
		//		- When user puts mouse over a subset component, the link-div appears
		//			as a red rounded outline
		//		- When user clicks the associated subset configuration window is opened on the desktop
		//			-- When user 'deep' clicks the popup menu for new tab, or full screen or tile is shown

		
		
		
		/////////////////////////////////////////////////////////////////////////////////////////
		/////////////////////////////////////////////////////////////////////////////////////////
	
		//functions:			
			//init()
			//handleWindowResize()
			//placeLinks()
		
		var img; 
		var IMG_W = 1866;
		var IMG_H = 606;
		var IMG_M = 10; //margin
		
	
		/////////////////////////////////////////////////////////////////////////////////////////
		/////////////////////////////////////////////////////////////////////////////////////////
				

		//=====================================================================================
		//init ~~
		//	init called once body has loaded
		function init() 
		{									
			Debug.log("System Block Diagram init ");
			DesktopContent.tooltip("System Block Diagram",
					"Welcome to the System Block Diagram. "+
					"The high-level data flow possibilities of your DAQ system are " +
					"represented in this diagram. The dark arrows represent primary data flow " +
					"through the software, the lighter arrows represent control/monitoring data flow " +
					"through the software. The dashed arrows represent front-end specific communication " +
					"protocols used to interface to your front-end devices.\n\n" +
					
					"The diagram is interactive, in the sense that you can click " +
					"a component of interest and the associated Configuration Subset window will be opened. " +
					"In the Configuration Subset window, you can modify the active configuration values and " +
					"save your changes."
			);
			
			img = document.getElementById("img");

			window.addEventListener("resize",handleWindowResize);
						
			handleWindowResize();
			
		} //end init()

		//=====================================================================================
		//handleWindowResize ~~
		//	called when page is resized
		function handleWindowResize()
		{
			//adjust link divs to proper size
			//	use ratio of new-size/original-size to determine proper size
			
		    var w = window.innerWidth | 0;
		    var h = window.innerHeight | 0;	    
		    
		    Debug.log("handleWindowResize to " + w + " - " + h);	
		    
		    var l = IMG_M;
		    var t = IMG_M;
		    
		    //try full width, calculate img height, if too tall shrink width 
		    var iw = w - 2*IMG_M;		    
		    var ih = ((1.0*IMG_H*w/IMG_W) | 0) ;
		    if(ih > h - 2*IMG_M)
		    {
		    	//too tall so shrink width, and adjust left
		    	ih = h - 2*IMG_M;
		    	iw = ((1.0*IMG_W*ih/IMG_H) | 0);		
		    	l = ((w-iw)/2) | 0; 
		    }
		    else //adjust top
		    	t = ((h-ih)/2) | 0;		    	
		    

			img.style.left = l + "px";
			img.style.top = t + "px";
		    img.style.width = iw + "px";
		    img.style.height = ih + "px";
		    
		    placeLinks();
		}
		

		//=====================================================================================
		//placeLinks ~~
		//	called when page is resized
		function placeLinks()
		{
			
		}
		
		</script>
</head>
	

<body onload='Javascript:init();'>	

	<!-- body content is just the clickable block diagram that stretches with window-->
	
	<img id='img' src='/WebPath/images/windowContentImages/subset-components.png' />
	
</body>
	
</html>
